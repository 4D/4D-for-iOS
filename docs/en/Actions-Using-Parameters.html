<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Actions-Using-Parameters · 4D for iOS Preview</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;---id: using-parameterstitle: Using parameters---&lt;div markdown=&quot;1&quot; class = &quot;objectives&quot;&gt;&lt;strong&gt;OBJECTIVES&lt;/strong&gt;Define action parameters to edit the content of your app.&lt;/div&gt;In the &lt;a href=&quot;define-first-action.html&quot;&gt;previous tutorial&lt;/a&gt;, we discovered how to execute 4D code from an iOS app by defining actions from the &lt;a href=&quot;actions.html&quot;&gt;Actions section&lt;/a&gt;.In this tutorial, we&#x27;re going to go further and create:* an Add action to &lt;strong&gt;create a new task&lt;/strong&gt;,* an Edit action that will allow you to &lt;strong&gt;edit existing tasks&lt;/strong&gt; from the iOS app,* a Delete action to &lt;strong&gt;delete an entity&lt;/strong&gt;, and* an action that will enable you to &lt;strong&gt;email a comment for a specific task&lt;/strong&gt;.To begin, let&#x27;s first download the &lt;strong&gt;Starter Project&lt;/strong&gt; based on our existing Tasks iOS app.&lt;div markdown=&quot;1&quot; style=&quot;text-align: center; margin-top: 20px; margin-bottom: 20px&quot;&gt;&lt;a class=&quot;button&quot;href=&quot;https://github.com/4d-for-ios/tutorial-ActionParameters/archive/159a7b73bd3556890a205024af42440faf0b277c.zip&quot;&gt;STARTER PROJECT&lt;/a&gt;&lt;/div&gt;## STEP 1. Add actionLet&#x27;s begin simple. Open the Tasks mobile project and go directly to the &lt;strong&gt;Actions section&lt;/strong&gt;. &lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Actions-section.png&quot; alt=&quot;Action section&quot;&gt;It&#x27;s quite empty for the moment... Here is what we want: &lt;strong&gt;create a new task from the iOS app&lt;/strong&gt;.For this, let&#x27;s create an action using a preset &lt;strong&gt;Add&lt;/strong&gt; action:* Click on the arrow in the &lt;strong&gt;+ button&lt;/strong&gt; at the bottom of the Actions table.* Select the &lt;strong&gt;Add action for&lt;/strong&gt; option.* Select the &lt;strong&gt;Task table&lt;/strong&gt;. &lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Add-action-creation.png&quot; alt=&quot;Add action creation&quot;&gt;* &lt;strong&gt;A new action&lt;/strong&gt; named &lt;em&gt;&amp;quot;addTasks&amp;quot;&lt;/em&gt; with &lt;em&gt;&amp;quot;Add...&amp;quot;&lt;/em&gt; as default label is displayed.* All available &lt;strong&gt;parameters&lt;/strong&gt; and their &lt;strong&gt;properties&lt;/strong&gt; are shown in the &lt;strong&gt;Actions Parameters&lt;/strong&gt; section.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Add-action-parameters.png&quot; alt=&quot;Add action parameters&quot;&gt;At this point, all &lt;strong&gt;Add action parameters&lt;/strong&gt; are created automatically and ready to use.## STEP 2. Edit actionNow let&#x27;s create an action that will allow you to &lt;strong&gt;edit your app content&lt;/strong&gt;.For this, we&#x27;ll create an action using a preset &lt;strong&gt;Edit&lt;/strong&gt; action:* Click on the arrow in the &lt;strong&gt;+ button&lt;/strong&gt; at the bottom of the Actions table.* Select the &lt;strong&gt;Edit action for&lt;/strong&gt; option.* Select the Tasks table. &lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Edit-action-creation.png&quot; alt=&quot;Edit action creation&quot;&gt;At this point, you will see:* &lt;strong&gt;A new action&lt;/strong&gt; named &lt;em&gt;&amp;quot;editTasks&amp;quot;&lt;/em&gt; with &lt;em&gt;&amp;quot;Edit...&amp;quot;&lt;/em&gt; as the default label.* All available action &lt;strong&gt;parameters&lt;/strong&gt; and their &lt;strong&gt;properties&lt;/strong&gt; are displayed in the &lt;strong&gt;Actions parameters&lt;/strong&gt; section.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Edit-action-parameters.png&quot; alt=&quot;Edit action parameters&quot;&gt;Don&#x27;t worry, we&#x27;ll handle the 4D code for these actions later. :-)## STEP 3. Delete actionThe preset &lt;strong&gt;Delete&lt;/strong&gt; action creation process is nearly the same as the Edit action:* Click on the arrow in the &lt;strong&gt;+ button&lt;/strong&gt; at the bottom of the Actions table.* Select the &lt;strong&gt;Delete action for&lt;/strong&gt; option.* Select the Tasks table. &lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Delete-action-creation.png&quot; alt=&quot;Delete action creation&quot;&gt;At this point, you will see a &lt;strong&gt;new action&lt;/strong&gt; named &lt;em&gt;&amp;quot;deleteTasks&amp;quot;&lt;/em&gt; with &lt;em&gt;&amp;quot;Remove&amp;quot;&lt;/em&gt; as the default label.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Delete-action-final.png&quot; alt=&quot;Delete action&quot;&gt;You don&#x27;t need to worry about parameters or properties for this type of action.## STEP 4. Send a comment actionNow we want to &lt;strong&gt;send a comment&lt;/strong&gt; to a &lt;strong&gt;specific email&lt;/strong&gt; depending on a specific task. To do so, click on the + button and create a new action named &lt;strong&gt;sendComment&lt;/strong&gt;.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Send-comment-action-creation.png&quot; alt=&quot;Delete action creation&quot;&gt;Now let&#x27;s create three parameters:* Click on the + button and select &lt;strong&gt;Title&lt;/strong&gt; in the Action Parameters list to include it in the email you&#x27;re going to send.* Create a &lt;strong&gt;Comment&lt;/strong&gt; parameter and select Text area as the format property.* Create an &lt;strong&gt;email&lt;/strong&gt; parameter and select Email address as the format property.Your Actions section should look like this:&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Send-comment-action-definition.png&quot; alt=&quot;Send comment action creation&quot;&gt;## STEP 5. Create the On Mobile App ActionAs described in the &lt;a href=&quot;actions.html&quot;&gt;documentation&lt;/a&gt;, click on the Create button to create the &lt;em&gt;On Mobile App Action&lt;/em&gt; database method.All of your actions will automatically be included in this database method.The only thing you need to do is add a reference to your method(s) for the scenario(s) your want to handle.Here&#x27;s the final &lt;em&gt;On Mobile App Action&lt;/em&gt; database method:&lt;code&gt;code4dC_OBJECT($0;$response)C_OBJECT($1;$request)C_OBJECT($o;$context;$request;$result;$parameters)$request:=$1 // Informations provided by mobile application$context:=$request.context$parameters:=$request.parametersCase of   : ($request.action=&amp;quot;addTasks&amp;quot;)  // Insert here the code for the action &amp;quot;Add…&amp;quot;  $o:=New object(\ &amp;quot;dataClass&amp;quot;;$context.dataClass;\ &amp;quot;parameters&amp;quot;;$parameters)  $result:=addAction ($o)  : ($request.action=&amp;quot;editTasks&amp;quot;)  // Insert here the code for the action &amp;quot;Edit…&amp;quot;  $o:=New object(\ &amp;quot;dataClass&amp;quot;;$context.dataClass;\ &amp;quot;ID&amp;quot;;$context.entity.primaryKey;\ &amp;quot;parameters&amp;quot;;$parameters)  $result:=editAction ($o)   : ($request.action=&amp;quot;deleteTasks&amp;quot;)  // Insert here the code for the action &amp;quot;Remove&amp;quot;  $o:=New object(\ &amp;quot;dataClass&amp;quot;;$context.dataClass;\ &amp;quot;ID&amp;quot;;$context.entity.primaryKey)  $result:=deleteAction ($o)  : ($request.action=&amp;quot;sendComment&amp;quot;)  // Insert here the code for the action &amp;quot;Send Comment&amp;quot;  $o:=New object(\ &amp;quot;dataClass&amp;quot;;$context.dataClass;\ &amp;quot;ID&amp;quot;;$context.entity.primaryKey;\ &amp;quot;parameters&amp;quot;;$parameters)   $result:=sendMail ($o)  Else   // Unknown action End case $0:=$result&lt;/code&gt;## STEP 6. Create All the methods you need### addAction&lt;code&gt;code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($entity;$in;$out)$in:=$1$out:=New object(&amp;quot;success&amp;quot;;False)If ($in.dataClass#Null)  $entity:=ds.Tasks.new() //create a reference  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $entity.save() //save the entity   $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh the selection $out.statusText:=&amp;quot;Task added&amp;quot; Else   $out.errors:=New collection(&amp;quot;No Selection&amp;quot;) End if $0:=$out&lt;/code&gt;### editAction&lt;code&gt;code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($dataClass;$entity;$in;$out;$status;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&amp;quot;ID = :1&amp;quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection[0]  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $status:=$entity.save()  $out:=New object  If ($status.success)  $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh this entity $out.statusText:=&amp;quot;Task edited&amp;quot;  Else   $out:=$status // return status to the App  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out&lt;/code&gt;### deleteAction&lt;code&gt;code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($dataClass;$entity;$in;$out;$status;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&amp;quot;ID = :1&amp;quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection.drop()  $out:=New object  If ($entity.length=0)  $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh this entity $out.statusText:=&amp;quot;Task deleted&amp;quot;  Else   $out:=$status // return status to the App  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out&lt;/code&gt;### sendEmail&lt;code&gt;code4dC_OBJECT($0;$out)C_OBJECT($1;$in)C_OBJECT($dataClass;$entity;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&amp;quot;ID = :1&amp;quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection[0]  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $out:=New object  $server:=New object $server.host:=&amp;quot;smtp.gmail.com&amp;quot; $server.port:=465 $server.user:=&amp;quot;test@mail.com&amp;quot; $server.password:=&amp;quot;yourPassword&amp;quot;  $transporter:=SMTP New transporter($server)  $email:=New object $email.subject:=&amp;quot;New comment about one of your task&amp;quot; $email.from:=&amp;quot;yourEmail&amp;quot; $email.to:=$emailToSend $email.htmlBody:=&amp;quot;&amp;lt;h1&amp;gt;Comment from Tasks for iOS&amp;lt;/h1&amp;gt;&amp;quot;+&amp;quot;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;Task:&amp;lt;/b&amp;gt; &amp;quot;+$taskTitle+&amp;quot;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;Comment:&amp;lt;/b&amp;gt; &amp;quot;\ +$commentToSend+&amp;quot;&amp;lt;/p&amp;gt;&amp;lt;br&amp;gt;&amp;lt;p&amp;gt;&amp;lt;i&amp;gt;Send from my 4D for iOS app&amp;lt;/i&amp;gt;&amp;lt;/p&amp;gt;&amp;quot;\  $status:=$transporter.send($email) If ($status.success) $out.success:=True // notify App that action success $out.statusText:=&amp;quot;Mail sent&amp;quot;  Else  $out.success:=False // notify App that action failed $out.statusText:=&amp;quot;Mail not sent&amp;quot;  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out&lt;/code&gt;*Don&#x27;t forget to add your own values for the &lt;strong&gt;sendEmail&lt;/strong&gt; action.## STEP 7. Build your appIt&#x27;s time to build your app! Now, if you click on the Action button in the navigation bar, you&#x27;ll be able to &lt;strong&gt;create a new task&lt;/strong&gt;.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Action-parameters-addAction.png&quot; alt=&quot;Create new task&quot;&gt;Holding and maintaining pressure on your new task cell in the List Form, will show that an &lt;strong&gt;Edit...&lt;/strong&gt; action is available in the action list.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Action-parameters-editAction.png&quot; alt=&quot;Edit task&quot;&gt;Send a comment using the &lt;strong&gt;Send comment&lt;/strong&gt; action.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Action-parameters-sendComment.png&quot; alt=&quot;Send task comment&quot;&gt;And finally you can delete an entity using the &lt;strong&gt;Delete...&lt;/strong&gt; action.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Action-parameters-deleteAction.png&quot; alt=&quot;Delete task&quot;&gt;## STEP 8. Where to go from here?Congratulations! Your Tasks iOS app is now complete and you can now modify your app data direclty from your device and sychronize it with your server!&lt;div markdown=&quot;1&quot; style=&quot;text-align: center; margin-top: 20px; margin-bottom: 20px&quot;&gt;&lt;a class=&quot;button&quot;href=&quot;https://github.com/4d-for-ios/tutorial-ActionParameters/releases/latest/download/tutorial-ActionParameters.zip&quot;&gt;FINAL PROJECT&lt;/a&gt;&lt;/div&gt;&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Actions-Using-Parameters · 4D for iOS Preview"/><meta property="og:type" content="website"/><meta property="og:url" content="https://4D.github.io/4d-for-ios/index.html"/><meta property="og:description" content="&lt;p&gt;---id: using-parameterstitle: Using parameters---&lt;div markdown=&quot;1&quot; class = &quot;objectives&quot;&gt;&lt;strong&gt;OBJECTIVES&lt;/strong&gt;Define action parameters to edit the content of your app.&lt;/div&gt;In the &lt;a href=&quot;define-first-action.html&quot;&gt;previous tutorial&lt;/a&gt;, we discovered how to execute 4D code from an iOS app by defining actions from the &lt;a href=&quot;actions.html&quot;&gt;Actions section&lt;/a&gt;.In this tutorial, we&#x27;re going to go further and create:* an Add action to &lt;strong&gt;create a new task&lt;/strong&gt;,* an Edit action that will allow you to &lt;strong&gt;edit existing tasks&lt;/strong&gt; from the iOS app,* a Delete action to &lt;strong&gt;delete an entity&lt;/strong&gt;, and* an action that will enable you to &lt;strong&gt;email a comment for a specific task&lt;/strong&gt;.To begin, let&#x27;s first download the &lt;strong&gt;Starter Project&lt;/strong&gt; based on our existing Tasks iOS app.&lt;div markdown=&quot;1&quot; style=&quot;text-align: center; margin-top: 20px; margin-bottom: 20px&quot;&gt;&lt;a class=&quot;button&quot;href=&quot;https://github.com/4d-for-ios/tutorial-ActionParameters/archive/159a7b73bd3556890a205024af42440faf0b277c.zip&quot;&gt;STARTER PROJECT&lt;/a&gt;&lt;/div&gt;## STEP 1. Add actionLet&#x27;s begin simple. Open the Tasks mobile project and go directly to the &lt;strong&gt;Actions section&lt;/strong&gt;. &lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Actions-section.png&quot; alt=&quot;Action section&quot;&gt;It&#x27;s quite empty for the moment... Here is what we want: &lt;strong&gt;create a new task from the iOS app&lt;/strong&gt;.For this, let&#x27;s create an action using a preset &lt;strong&gt;Add&lt;/strong&gt; action:* Click on the arrow in the &lt;strong&gt;+ button&lt;/strong&gt; at the bottom of the Actions table.* Select the &lt;strong&gt;Add action for&lt;/strong&gt; option.* Select the &lt;strong&gt;Task table&lt;/strong&gt;. &lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Add-action-creation.png&quot; alt=&quot;Add action creation&quot;&gt;* &lt;strong&gt;A new action&lt;/strong&gt; named &lt;em&gt;&amp;quot;addTasks&amp;quot;&lt;/em&gt; with &lt;em&gt;&amp;quot;Add...&amp;quot;&lt;/em&gt; as default label is displayed.* All available &lt;strong&gt;parameters&lt;/strong&gt; and their &lt;strong&gt;properties&lt;/strong&gt; are shown in the &lt;strong&gt;Actions Parameters&lt;/strong&gt; section.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Add-action-parameters.png&quot; alt=&quot;Add action parameters&quot;&gt;At this point, all &lt;strong&gt;Add action parameters&lt;/strong&gt; are created automatically and ready to use.## STEP 2. Edit actionNow let&#x27;s create an action that will allow you to &lt;strong&gt;edit your app content&lt;/strong&gt;.For this, we&#x27;ll create an action using a preset &lt;strong&gt;Edit&lt;/strong&gt; action:* Click on the arrow in the &lt;strong&gt;+ button&lt;/strong&gt; at the bottom of the Actions table.* Select the &lt;strong&gt;Edit action for&lt;/strong&gt; option.* Select the Tasks table. &lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Edit-action-creation.png&quot; alt=&quot;Edit action creation&quot;&gt;At this point, you will see:* &lt;strong&gt;A new action&lt;/strong&gt; named &lt;em&gt;&amp;quot;editTasks&amp;quot;&lt;/em&gt; with &lt;em&gt;&amp;quot;Edit...&amp;quot;&lt;/em&gt; as the default label.* All available action &lt;strong&gt;parameters&lt;/strong&gt; and their &lt;strong&gt;properties&lt;/strong&gt; are displayed in the &lt;strong&gt;Actions parameters&lt;/strong&gt; section.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Edit-action-parameters.png&quot; alt=&quot;Edit action parameters&quot;&gt;Don&#x27;t worry, we&#x27;ll handle the 4D code for these actions later. :-)## STEP 3. Delete actionThe preset &lt;strong&gt;Delete&lt;/strong&gt; action creation process is nearly the same as the Edit action:* Click on the arrow in the &lt;strong&gt;+ button&lt;/strong&gt; at the bottom of the Actions table.* Select the &lt;strong&gt;Delete action for&lt;/strong&gt; option.* Select the Tasks table. &lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Delete-action-creation.png&quot; alt=&quot;Delete action creation&quot;&gt;At this point, you will see a &lt;strong&gt;new action&lt;/strong&gt; named &lt;em&gt;&amp;quot;deleteTasks&amp;quot;&lt;/em&gt; with &lt;em&gt;&amp;quot;Remove&amp;quot;&lt;/em&gt; as the default label.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Delete-action-final.png&quot; alt=&quot;Delete action&quot;&gt;You don&#x27;t need to worry about parameters or properties for this type of action.## STEP 4. Send a comment actionNow we want to &lt;strong&gt;send a comment&lt;/strong&gt; to a &lt;strong&gt;specific email&lt;/strong&gt; depending on a specific task. To do so, click on the + button and create a new action named &lt;strong&gt;sendComment&lt;/strong&gt;.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Send-comment-action-creation.png&quot; alt=&quot;Delete action creation&quot;&gt;Now let&#x27;s create three parameters:* Click on the + button and select &lt;strong&gt;Title&lt;/strong&gt; in the Action Parameters list to include it in the email you&#x27;re going to send.* Create a &lt;strong&gt;Comment&lt;/strong&gt; parameter and select Text area as the format property.* Create an &lt;strong&gt;email&lt;/strong&gt; parameter and select Email address as the format property.Your Actions section should look like this:&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Send-comment-action-definition.png&quot; alt=&quot;Send comment action creation&quot;&gt;## STEP 5. Create the On Mobile App ActionAs described in the &lt;a href=&quot;actions.html&quot;&gt;documentation&lt;/a&gt;, click on the Create button to create the &lt;em&gt;On Mobile App Action&lt;/em&gt; database method.All of your actions will automatically be included in this database method.The only thing you need to do is add a reference to your method(s) for the scenario(s) your want to handle.Here&#x27;s the final &lt;em&gt;On Mobile App Action&lt;/em&gt; database method:&lt;code&gt;code4dC_OBJECT($0;$response)C_OBJECT($1;$request)C_OBJECT($o;$context;$request;$result;$parameters)$request:=$1 // Informations provided by mobile application$context:=$request.context$parameters:=$request.parametersCase of   : ($request.action=&amp;quot;addTasks&amp;quot;)  // Insert here the code for the action &amp;quot;Add…&amp;quot;  $o:=New object(\ &amp;quot;dataClass&amp;quot;;$context.dataClass;\ &amp;quot;parameters&amp;quot;;$parameters)  $result:=addAction ($o)  : ($request.action=&amp;quot;editTasks&amp;quot;)  // Insert here the code for the action &amp;quot;Edit…&amp;quot;  $o:=New object(\ &amp;quot;dataClass&amp;quot;;$context.dataClass;\ &amp;quot;ID&amp;quot;;$context.entity.primaryKey;\ &amp;quot;parameters&amp;quot;;$parameters)  $result:=editAction ($o)   : ($request.action=&amp;quot;deleteTasks&amp;quot;)  // Insert here the code for the action &amp;quot;Remove&amp;quot;  $o:=New object(\ &amp;quot;dataClass&amp;quot;;$context.dataClass;\ &amp;quot;ID&amp;quot;;$context.entity.primaryKey)  $result:=deleteAction ($o)  : ($request.action=&amp;quot;sendComment&amp;quot;)  // Insert here the code for the action &amp;quot;Send Comment&amp;quot;  $o:=New object(\ &amp;quot;dataClass&amp;quot;;$context.dataClass;\ &amp;quot;ID&amp;quot;;$context.entity.primaryKey;\ &amp;quot;parameters&amp;quot;;$parameters)   $result:=sendMail ($o)  Else   // Unknown action End case $0:=$result&lt;/code&gt;## STEP 6. Create All the methods you need### addAction&lt;code&gt;code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($entity;$in;$out)$in:=$1$out:=New object(&amp;quot;success&amp;quot;;False)If ($in.dataClass#Null)  $entity:=ds.Tasks.new() //create a reference  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $entity.save() //save the entity   $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh the selection $out.statusText:=&amp;quot;Task added&amp;quot; Else   $out.errors:=New collection(&amp;quot;No Selection&amp;quot;) End if $0:=$out&lt;/code&gt;### editAction&lt;code&gt;code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($dataClass;$entity;$in;$out;$status;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&amp;quot;ID = :1&amp;quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection[0]  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $status:=$entity.save()  $out:=New object  If ($status.success)  $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh this entity $out.statusText:=&amp;quot;Task edited&amp;quot;  Else   $out:=$status // return status to the App  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out&lt;/code&gt;### deleteAction&lt;code&gt;code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($dataClass;$entity;$in;$out;$status;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&amp;quot;ID = :1&amp;quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection.drop()  $out:=New object  If ($entity.length=0)  $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh this entity $out.statusText:=&amp;quot;Task deleted&amp;quot;  Else   $out:=$status // return status to the App  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out&lt;/code&gt;### sendEmail&lt;code&gt;code4dC_OBJECT($0;$out)C_OBJECT($1;$in)C_OBJECT($dataClass;$entity;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&amp;quot;ID = :1&amp;quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection[0]  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $out:=New object  $server:=New object $server.host:=&amp;quot;smtp.gmail.com&amp;quot; $server.port:=465 $server.user:=&amp;quot;test@mail.com&amp;quot; $server.password:=&amp;quot;yourPassword&amp;quot;  $transporter:=SMTP New transporter($server)  $email:=New object $email.subject:=&amp;quot;New comment about one of your task&amp;quot; $email.from:=&amp;quot;yourEmail&amp;quot; $email.to:=$emailToSend $email.htmlBody:=&amp;quot;&amp;lt;h1&amp;gt;Comment from Tasks for iOS&amp;lt;/h1&amp;gt;&amp;quot;+&amp;quot;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;Task:&amp;lt;/b&amp;gt; &amp;quot;+$taskTitle+&amp;quot;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;Comment:&amp;lt;/b&amp;gt; &amp;quot;\ +$commentToSend+&amp;quot;&amp;lt;/p&amp;gt;&amp;lt;br&amp;gt;&amp;lt;p&amp;gt;&amp;lt;i&amp;gt;Send from my 4D for iOS app&amp;lt;/i&amp;gt;&amp;lt;/p&amp;gt;&amp;quot;\  $status:=$transporter.send($email) If ($status.success) $out.success:=True // notify App that action success $out.statusText:=&amp;quot;Mail sent&amp;quot;  Else  $out.success:=False // notify App that action failed $out.statusText:=&amp;quot;Mail not sent&amp;quot;  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out&lt;/code&gt;*Don&#x27;t forget to add your own values for the &lt;strong&gt;sendEmail&lt;/strong&gt; action.## STEP 7. Build your appIt&#x27;s time to build your app! Now, if you click on the Action button in the navigation bar, you&#x27;ll be able to &lt;strong&gt;create a new task&lt;/strong&gt;.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Action-parameters-addAction.png&quot; alt=&quot;Create new task&quot;&gt;Holding and maintaining pressure on your new task cell in the List Form, will show that an &lt;strong&gt;Edit...&lt;/strong&gt; action is available in the action list.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Action-parameters-editAction.png&quot; alt=&quot;Edit task&quot;&gt;Send a comment using the &lt;strong&gt;Send comment&lt;/strong&gt; action.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Action-parameters-sendComment.png&quot; alt=&quot;Send task comment&quot;&gt;And finally you can delete an entity using the &lt;strong&gt;Delete...&lt;/strong&gt; action.&lt;img src=&quot;/4d-for-ios/docs/assets/en/actions/Action-parameters-deleteAction.png&quot; alt=&quot;Delete task&quot;&gt;## STEP 8. Where to go from here?Congratulations! Your Tasks iOS app is now complete and you can now modify your app data direclty from your device and sychronize it with your server!&lt;div markdown=&quot;1&quot; style=&quot;text-align: center; margin-top: 20px; margin-bottom: 20px&quot;&gt;&lt;a class=&quot;button&quot;href=&quot;https://github.com/4d-for-ios/tutorial-ActionParameters/releases/latest/download/tutorial-ActionParameters.zip&quot;&gt;FINAL PROJECT&lt;/a&gt;&lt;/div&gt;&lt;/p&gt;
"/><meta property="og:image" content="https://4D.github.io/4d-for-ios/img/logo4DforiOS.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://4D.github.io/4d-for-ios/img/logo4DforiOS.png"/><link rel="shortcut icon" href="/4d-for-ios/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dark.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-129154982-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/4d-for-ios/js/code-block-buttons.js"></script><link rel="stylesheet" href="/4d-for-ios/css/main.css"/><script src="/4d-for-ios/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/4d-for-ios/en"><h2 class="headerTitle">4D for iOS Preview</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/4d-for-ios/docs/en/overview.html" target="_self">Docs</a></li><li class=""><a href="/4d-for-ios/docs/en/contact-app.html" target="_self">Tutorials</a></li><li class=""><a href="/4d-for-ios/docs/en/template.html" target="_self">Templates &amp; Formatters</a></li><li class=""><a href="/4d-for-ios/docs/en/faq.html" target="_self">FAQ</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/4d-for-ios/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/4d-for-ios/docs/es-ES/Actions-Using-Parameters.html">Español</a></li><li><a href="/4d-for-ios/docs/fr/Actions-Using-Parameters.html">Français</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/4D/4D-for-iOS/edit/develop/docs/Actions-Using-Parameters.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Actions-Using-Parameters</h1></header><article><div><span><p>---id: using-parameterstitle: Using parameters---<div markdown="1" class = "objectives"><strong>OBJECTIVES</strong>Define action parameters to edit the content of your app.</div>In the <a href="define-first-action.html">previous tutorial</a>, we discovered how to execute 4D code from an iOS app by defining actions from the <a href="actions.html">Actions section</a>.In this tutorial, we're going to go further and create:* an Add action to <strong>create a new task</strong>,* an Edit action that will allow you to <strong>edit existing tasks</strong> from the iOS app,* a Delete action to <strong>delete an entity</strong>, and* an action that will enable you to <strong>email a comment for a specific task</strong>.To begin, let's first download the <strong>Starter Project</strong> based on our existing Tasks iOS app.<div markdown="1" style="text-align: center; margin-top: 20px; margin-bottom: 20px"><a class="button"href="https://github.com/4d-for-ios/tutorial-ActionParameters/archive/159a7b73bd3556890a205024af42440faf0b277c.zip">STARTER PROJECT</a></div>## STEP 1. Add actionLet's begin simple. Open the Tasks mobile project and go directly to the <strong>Actions section</strong>. <img src="/4d-for-ios/docs/assets/en/actions/Actions-section.png" alt="Action section">It's quite empty for the moment... Here is what we want: <strong>create a new task from the iOS app</strong>.For this, let's create an action using a preset <strong>Add</strong> action:* Click on the arrow in the <strong>+ button</strong> at the bottom of the Actions table.* Select the <strong>Add action for</strong> option.* Select the <strong>Task table</strong>. <img src="/4d-for-ios/docs/assets/en/actions/Add-action-creation.png" alt="Add action creation">* <strong>A new action</strong> named <em>&quot;addTasks&quot;</em> with <em>&quot;Add...&quot;</em> as default label is displayed.* All available <strong>parameters</strong> and their <strong>properties</strong> are shown in the <strong>Actions Parameters</strong> section.<img src="/4d-for-ios/docs/assets/en/actions/Add-action-parameters.png" alt="Add action parameters">At this point, all <strong>Add action parameters</strong> are created automatically and ready to use.## STEP 2. Edit actionNow let's create an action that will allow you to <strong>edit your app content</strong>.For this, we'll create an action using a preset <strong>Edit</strong> action:* Click on the arrow in the <strong>+ button</strong> at the bottom of the Actions table.* Select the <strong>Edit action for</strong> option.* Select the Tasks table. <img src="/4d-for-ios/docs/assets/en/actions/Edit-action-creation.png" alt="Edit action creation">At this point, you will see:* <strong>A new action</strong> named <em>&quot;editTasks&quot;</em> with <em>&quot;Edit...&quot;</em> as the default label.* All available action <strong>parameters</strong> and their <strong>properties</strong> are displayed in the <strong>Actions parameters</strong> section.<img src="/4d-for-ios/docs/assets/en/actions/Edit-action-parameters.png" alt="Edit action parameters">Don't worry, we'll handle the 4D code for these actions later. :-)## STEP 3. Delete actionThe preset <strong>Delete</strong> action creation process is nearly the same as the Edit action:* Click on the arrow in the <strong>+ button</strong> at the bottom of the Actions table.* Select the <strong>Delete action for</strong> option.* Select the Tasks table. <img src="/4d-for-ios/docs/assets/en/actions/Delete-action-creation.png" alt="Delete action creation">At this point, you will see a <strong>new action</strong> named <em>&quot;deleteTasks&quot;</em> with <em>&quot;Remove&quot;</em> as the default label.<img src="/4d-for-ios/docs/assets/en/actions/Delete-action-final.png" alt="Delete action">You don't need to worry about parameters or properties for this type of action.## STEP 4. Send a comment actionNow we want to <strong>send a comment</strong> to a <strong>specific email</strong> depending on a specific task. To do so, click on the + button and create a new action named <strong>sendComment</strong>.<img src="/4d-for-ios/docs/assets/en/actions/Send-comment-action-creation.png" alt="Delete action creation">Now let's create three parameters:* Click on the + button and select <strong>Title</strong> in the Action Parameters list to include it in the email you're going to send.* Create a <strong>Comment</strong> parameter and select Text area as the format property.* Create an <strong>email</strong> parameter and select Email address as the format property.Your Actions section should look like this:<img src="/4d-for-ios/docs/assets/en/actions/Send-comment-action-definition.png" alt="Send comment action creation">## STEP 5. Create the On Mobile App ActionAs described in the <a href="actions.html">documentation</a>, click on the Create button to create the <em>On Mobile App Action</em> database method.All of your actions will automatically be included in this database method.The only thing you need to do is add a reference to your method(s) for the scenario(s) your want to handle.Here's the final <em>On Mobile App Action</em> database method:<code>code4dC_OBJECT($0;$response)C_OBJECT($1;$request)C_OBJECT($o;$context;$request;$result;$parameters)$request:=$1 // Informations provided by mobile application$context:=$request.context$parameters:=$request.parametersCase of   : ($request.action=&quot;addTasks&quot;)  // Insert here the code for the action &quot;Add…&quot;  $o:=New object(\ &quot;dataClass&quot;;$context.dataClass;\ &quot;parameters&quot;;$parameters)  $result:=addAction ($o)  : ($request.action=&quot;editTasks&quot;)  // Insert here the code for the action &quot;Edit…&quot;  $o:=New object(\ &quot;dataClass&quot;;$context.dataClass;\ &quot;ID&quot;;$context.entity.primaryKey;\ &quot;parameters&quot;;$parameters)  $result:=editAction ($o)   : ($request.action=&quot;deleteTasks&quot;)  // Insert here the code for the action &quot;Remove&quot;  $o:=New object(\ &quot;dataClass&quot;;$context.dataClass;\ &quot;ID&quot;;$context.entity.primaryKey)  $result:=deleteAction ($o)  : ($request.action=&quot;sendComment&quot;)  // Insert here the code for the action &quot;Send Comment&quot;  $o:=New object(\ &quot;dataClass&quot;;$context.dataClass;\ &quot;ID&quot;;$context.entity.primaryKey;\ &quot;parameters&quot;;$parameters)   $result:=sendMail ($o)  Else   // Unknown action End case $0:=$result</code>## STEP 6. Create All the methods you need### addAction<code>code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($entity;$in;$out)$in:=$1$out:=New object(&quot;success&quot;;False)If ($in.dataClass#Null)  $entity:=ds.Tasks.new() //create a reference  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $entity.save() //save the entity   $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh the selection $out.statusText:=&quot;Task added&quot; Else   $out.errors:=New collection(&quot;No Selection&quot;) End if $0:=$out</code>### editAction<code>code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($dataClass;$entity;$in;$out;$status;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&quot;ID = :1&quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection[0]  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $status:=$entity.save()  $out:=New object  If ($status.success)  $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh this entity $out.statusText:=&quot;Task edited&quot;  Else   $out:=$status // return status to the App  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out</code>### deleteAction<code>code4dC_OBJECT($0)C_OBJECT($1)C_OBJECT($dataClass;$entity;$in;$out;$status;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&quot;ID = :1&quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection.drop()  $out:=New object  If ($entity.length=0)  $out.success:=True // notify App that action success $out.dataSynchro:=True // notify App to refresh this entity $out.statusText:=&quot;Task deleted&quot;  Else   $out:=$status // return status to the App  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out</code>### sendEmail<code>code4dC_OBJECT($0;$out)C_OBJECT($1;$in)C_OBJECT($dataClass;$entity;$selection)$in:=$1$selection:=ds[$in.dataClass].query(&quot;ID = :1&quot;;String($in.ID))If ($selection.length=1)  $entity:=$selection[0]  For each ($key;$in.parameters)  $entity[$key]:=$in.parameters[$key]  End for each   $out:=New object  $server:=New object $server.host:=&quot;smtp.gmail.com&quot; $server.port:=465 $server.user:=&quot;test@mail.com&quot; $server.password:=&quot;yourPassword&quot;  $transporter:=SMTP New transporter($server)  $email:=New object $email.subject:=&quot;New comment about one of your task&quot; $email.from:=&quot;yourEmail&quot; $email.to:=$emailToSend $email.htmlBody:=&quot;&lt;h1&gt;Comment from Tasks for iOS&lt;/h1&gt;&quot;+&quot;&lt;p&gt;&lt;b&gt;Task:&lt;/b&gt; &quot;+$taskTitle+&quot;&lt;/p&gt;&lt;p&gt;&lt;b&gt;Comment:&lt;/b&gt; &quot;\ +$commentToSend+&quot;&lt;/p&gt;&lt;br&gt;&lt;p&gt;&lt;i&gt;Send from my 4D for iOS app&lt;/i&gt;&lt;/p&gt;&quot;\  $status:=$transporter.send($email) If ($status.success) $out.success:=True // notify App that action success $out.statusText:=&quot;Mail sent&quot;  Else  $out.success:=False // notify App that action failed $out.statusText:=&quot;Mail not sent&quot;  End if  Else   $out.success:=False // notify App that action failed End if $0:=$out</code>*Don't forget to add your own values for the <strong>sendEmail</strong> action.## STEP 7. Build your appIt's time to build your app! Now, if you click on the Action button in the navigation bar, you'll be able to <strong>create a new task</strong>.<img src="/4d-for-ios/docs/assets/en/actions/Action-parameters-addAction.png" alt="Create new task">Holding and maintaining pressure on your new task cell in the List Form, will show that an <strong>Edit...</strong> action is available in the action list.<img src="/4d-for-ios/docs/assets/en/actions/Action-parameters-editAction.png" alt="Edit task">Send a comment using the <strong>Send comment</strong> action.<img src="/4d-for-ios/docs/assets/en/actions/Action-parameters-sendComment.png" alt="Send task comment">And finally you can delete an entity using the <strong>Delete...</strong> action.<img src="/4d-for-ios/docs/assets/en/actions/Action-parameters-deleteAction.png" alt="Delete task">## STEP 8. Where to go from here?Congratulations! Your Tasks iOS app is now complete and you can now modify your app data direclty from your device and sychronize it with your server!<div markdown="1" style="text-align: center; margin-top: 20px; margin-bottom: 20px"><a class="button"href="https://github.com/4d-for-ios/tutorial-ActionParameters/releases/latest/download/tutorial-ActionParameters.zip">FINAL PROJECT</a></div></p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/4d-for-ios/" class="nav-home"></a><div><h5>Community</h5><a href="https://www.facebook.com/4Dsoftware" target="_blank" rel="noreferrer noopener">Facebook</a><a href="https://twitter.com/4Dsoftware" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.youtube.com/user/4Dsoftware" target="_blank" rel="noreferrer noopener">Youtube</a><a href="https://blog.4d.com/tag/4d-for-ios/" target="_blank" rel="noreferrer noopener">Blog</a><a href="http://forums.4d.com" target="_blank" rel="noreferrer noopener">Forum</a></div><div><h5>About</h5><a href="http://www.4d.com">4D</a><a href="http://www.4d.com/legal.html">Legal</a><a href="/4d-for-ios/docs/en/licenses.html">Licenses</a><a href="https://github.com/4D/4d-for-ios">GitHub</a><a class="github-button" href="https://github.com/4D/4d-for-ios" data-icon="octicon-star" data-count-href="/4D/4d-for-ios/stargazers" data-count-api="/repos/4D/4d-for-ios#stargazers_count" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 4D SAS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'a00a6f38bb6849ff2b47dad3fcfceaa0',
                indexName: 'davaz4d',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>